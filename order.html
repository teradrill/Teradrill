<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Order - Teradrill</title>
<link rel="stylesheet" href="style.css" />
<style>
body {
  background: #0e0e0e;
  color: #fff;
  font-family: 'Poppins', sans-serif;
  margin: 0;
  padding: 0;
}
.container {
  max-width: 800px;
  margin: auto;
  padding: 20px;
}
h1 {
  text-align: center;
  font-size: 2.5em;
  margin-bottom: 10px;
  color: #00bcd4;
}
p { line-height: 1.6; }
form {
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}
input, textarea {
  padding: 12px;
  border: none;
  border-radius: 8px;
  background: #2a2a2a;
  color: white;
  font-size: 1em;
}
button {
  padding: 12px;
  border: none;
  border-radius: 8px;
  background: #00bcd4;
  color: white;
  font-size: 1em;
  cursor: pointer;
  transition: background 0.3s ease;
}
button:hover { background: #0097a7; }
#responseMsg {
  margin-top: 10px;
  font-weight: bold;
}
.note {
  text-align: center;
  margin-top: 20px;
  color: #ccc;
  font-size: 0.95em;
}
.premium-lock {
  color: #00bcd4;
  cursor: pointer;
}
.premium-available {
  color: #6ee7b7;
  font-weight: 500;
}
@media (max-width: 600px) {
  .premium-box {
    flex: 1 1 100%;
  }
}
</style>
</head>
<body>

<div id="premiumPopup" style="
  position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
  background: #111; color: #eee; padding: 20px;
  border-radius: 12px; max-width: 800px; width: 95%;
  text-align: center; z-index: 9999;
  box-shadow: 0 0 15px #0af; display: none;
">
<canvas id="threadCanvas" style="
  position: absolute; top:0; left:0; width:100%; height:100%; z-index:0;
"></canvas>

<div style="position:relative; z-index:1;">
<h2 style="color: #0af; margin-bottom: 10px;">‚ú® Premium Packages Explained</h2>
<p style="font-size: 0.9rem; color:#ccc; margin-bottom:20px;">
  Unlock premium features to enhance your order and get the best experience.
</p>

<div style="
  display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between; text-align: left; font-size:0.9rem;
">
  <!-- Priority Delivery -->
  <div class="premium-box" style="
    background:#222; flex:1 1 250px; padding:15px; border-radius:8px; box-shadow:0 0 8px #0af;
  ">
    <h3 style="color:#0af; text-align:center;">üöÄ Priority Delivery</h3>
    <ul style="list-style:none; padding:0; margin:0;">
      <li>‚úîÔ∏è Order delivered in under 24 hours</li>
      <li>‚úîÔ∏è Moved to the front of the design queue</li>
      <li>‚úîÔ∏è Ideal for urgent projects</li>
    </ul>
    <p style="text-align:center; margin-top:10px; color:#ccc;">Price: <strong>‚Çπ29</strong></p>
  </div>

  <!-- High-Resolution Export -->
  <div class="premium-box" style="
    background:#222; flex:1 1 250px; padding:15px; border-radius:8px; box-shadow:0 0 8px #0af;
  ">
    <h3 style="color:#0af; text-align:center;">üñºÔ∏è High-Resolution Export</h3>
    <ul style="list-style:none; padding:0; margin:0;">
      <li>‚úîÔ∏è 4K / Print-quality design</li>
      <li>‚úîÔ∏è No watermark on final files</li>
      <li>‚úîÔ∏è Perfect for banners & posters</li>
    </ul>
    <p style="text-align:center; margin-top:10px; color:#ccc;">Price: <strong>‚Çπ19</strong></p>
  </div>

  <!-- Unlimited Revisions -->
  <div class="premium-box" style="
    background:#222; flex:1 1 250px; padding:15px; border-radius:8px; box-shadow:0 0 8px #0af;
  ">
    <h3 style="color:#0af; text-align:center;">üîÅ Unlimited Revisions</h3>
    <ul style="list-style:none; padding:0; margin:0;">
      <li>‚úîÔ∏è Request as many changes as needed</li>
      <li>‚úîÔ∏è Perfect your design</li>
      <li>‚úîÔ∏è No limits on edits</li>
    </ul>
    <p style="text-align:center; margin-top:10px; color:#ccc;">Price: <strong>‚Çπ25</strong></p>
  </div>
</div>

<div style="margin-top:20px;">
  <p style="font-size: 0.85rem; color:#aaa;">
    Or get the <strong>Full Premium</strong> package for ‚Çπ99/month and unlock all features above plus 1-on-1 chat support.
  </p>
</div>

<button onclick="closePopup()" style="
  margin-top: 15px; background: #0af; color: white;
  border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer;
  font-weight:600;
">Close</button>
</div>
</div>

<div class="container">
<h1>Place Your Order</h1>
<p class="note">
Note: Watermark previews are provided before final delivery.<br>
Need <span id="priorityTag" class="premium-lock">Priority Delivery üîí</span> or
<span id="hdTag" class="premium-lock">HD Export üîí</span>? Unlock Premium Features.
</p>
<form id="orderForm">
<input type="text" name="name" placeholder="Your Name" required />
<input type="email" name="email" placeholder="Your Email" required />
<textarea name="idea" placeholder="Describe your idea..." required rows="5"></textarea>
<button type="submit">Submit Order</button>
<div id="responseMsg"></div>
</form>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBMgeW6QtxudLTtH8AOSl_89wLpL3ggHSs",
  authDomain: "teradrill-7bb95.firebaseapp.com",
  projectId: "teradrill-7bb95",
  storageBucket: "teradrill-7bb95.firebasestorage.app",
  messagingSenderId: "886182110027",
  appId: "1:886182110027:web:53eb81d9ed2e0669c03ece"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const form = document.getElementById('orderForm');
const responseMsg = document.getElementById('responseMsg');

form.addEventListener('submit', async function (e) {
  e.preventDefault();
  const name = this.name.value.trim();
  const email = this.email.value.trim();
  const idea = this.idea.value.trim();

  if (!name || !email || !idea) {
    responseMsg.textContent = "Please fill in all fields.";
    return;
  }

  try {
    await addDoc(collection(db, "orders"), {
      name,
      email,
      idea,
      timestamp: serverTimestamp()
    });

    const hasHD = localStorage.getItem("teradrill_premium_hd") === "true" ||
                  localStorage.getItem("teradrill_premium_premium") === "true";

    responseMsg.textContent = hasHD
      ? `Thanks, ${name}! Your project will be ready soon with HD export.`
      : `Thanks, ${name}! We received your order. We'll reach out soon.`;

    this.reset();
  } catch (err) {
    console.error(err);
    responseMsg.textContent = "Error submitting order. Try again.";
  }
});
</script>

<script>
const hdTag = document.getElementById('hdTag');
const priorityTag = document.getElementById('priorityTag');

const hasHD = localStorage.getItem("teradrill_premium_hd") === "true" ||
              localStorage.getItem("teradrill_premium_premium") === "true";
const hasPriority = localStorage.getItem("teradrill_premium_priority") === "true" ||
                    localStorage.getItem("teradrill_premium_premium") === "true";

if (hasHD) {
  hdTag.textContent = "HD Export ‚úÖ";
  hdTag.classList.remove("premium-lock");
  hdTag.classList.add("premium-available");
} else {
  hdTag.addEventListener('click', () => {
    window.location.href = 'premium.html';
  });
}

if (hasPriority) {
  priorityTag.textContent = "Priority Delivery ‚úÖ";
  priorityTag.classList.remove("premium-lock");
  priorityTag.classList.add("premium-available");
} else {
  priorityTag.addEventListener('click', () => {
    window.location.href = 'premium.html';
  });
}

window.addEventListener("DOMContentLoaded", () => {
  document.getElementById("premiumPopup").style.display = "flex";

  const canvas = document.getElementById("threadCanvas");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const lines = Array.from({length: 20}, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    len: 50 + Math.random() * 100,
    speed: 0.5 + Math.random(),
    angle: Math.random() * Math.PI * 2
  }));

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.strokeStyle = "rgba(255,255,255,0.1)";
    ctx.lineWidth = 1;
    for (let line of lines) {
      const dx = Math.cos(line.angle) * line.len;
      const dy = Math.sin(line.angle) * line.len;
      ctx.beginPath();
      ctx.moveTo(line.x, line.y);
      ctx.lineTo(line.x + dx, line.y + dy);
      ctx.stroke();

      line.x += Math.cos(line.angle) * line.speed;
      line.y += Math.sin(line.angle) * line.speed;

      if (line.x < -line.len) line.x = canvas.width + line.len;
      if (line.x > canvas.width + line.len) line.x = -line.len;
      if (line.y < -line.len) line.y = canvas.height + line.len;
      if (line.y > canvas.height + line.len) line.y = -line.len;
    }
    requestAnimationFrame(draw);
  }
  draw();
});

function closePopup() {
  document.getElementById("premiumPopup").style.display = "none";
}
</script>
</body>
</html>